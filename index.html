<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">

<meta name="theme-color" content="#1E003D"/> <link rel="apple-touch-icon" href="img/phonechat.png"/>

<title>Phone Chat</title>

<meta name="description" content="try to chat"/>
<meta name="viewport" content="width=device-width" initial-scale=1.0>
<!--<link rel="stylesheet" href="styles.css">-->
<link rel="manifest" href="manifest.json">

<script >
    
    localStorage.total=0;
    
       async function getClipboardContent() {
  try {
    const textcb = await navigator.clipboard.readText();
    //alert('Pasted content: ', textcb);
      document.getElementById('text').value=textcb;
      changetext();
  } catch (err) {
    alert('Failed to read clipboard contents: ', err);
  }
}
       function checkStorage(){
           alert(localStorage.test);
           localStorage.test = document.getElementById("text").value;
           
           }
       function changetext()
{
        txt="";
       let parent = document.querySelector('#parent');
        txt=document.getElementById('text').value;
        
        regtxt=txt.match(/\d+/g).join('');
       
        document.getElementById('text').value=regtxt;
    utotal=parseInt(localStorage.total,10)+1;
    localStorage.set("item"+utotal,regtxt);
    localStorage.total=utotal;
    alert(localStorage.get("item"+utotal));
    
	let li = document.createElement('li');
	li.innerHTML = localStorage.get("item"+utotal);
        parent.insertBefore(li, parent.firstChild);

        //document.getElementById('myform').submit();
}
    
    
</script>

<style>         
#text
{
height:100px;
width:100%;
font-size:50px;
color:white;
background:cadetblue;
}
</style>
</head>

<body>

<form id="myform" action="https://api.whatsapp.com/send">
step1
<input id="storage" type="button" value="check storage" onClick="checkStorage();">
<input id="cb" type="button" value="get clipboard" onClick="getClipboardContent();">
<input id="text" type="text" name="phone">
</form>
<ul id="parent"></ul>
<script>
    let parent = document.querySelector('#parent');
    for (let i = 1; i <= parseInt(localStorage.total,10); i++) {
	let li = document.createElement('li');
	li.innerHTML = localStorage.get("item"+i);
        parent.insertBefore(li, 
	parent.firstChild);
}
if('serviceWorker' in navigator){ navigator.serviceWorker.register('/service-worker.js');} else { console.log("Service worker is not supported"); }
</script>

</body>
</html>
